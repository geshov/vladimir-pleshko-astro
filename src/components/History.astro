---
import { getEntry, getCollection } from "astro:content";
import { sortHistory } from "../utils/helpers";

import SectionTitle from "./SectionTitle.astro";
import HistoryItem from "./HistoryItem.astro";

const history = await getEntry("sections", "history");
const items = sortHistory(await getCollection("history"));
---

<section x-ref="history" class="_section">
  <div class="_container">
    <div class="flex flex-col gap-10">
      <SectionTitle title={history.data.title} />

      <ul
        class="timeline timeline-snap-icon max-md:timeline-compact timeline-vertical">
        {items.map((item, index) => <HistoryItem item={item} index={index} />)}
      </ul>
    </div>
  </div>
</section>
