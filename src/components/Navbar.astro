---
import { getEntry } from "astro:content";
const site = await getEntry("common", "site");
---

<div
  x-data="navbar"
  @scroll.window="handleScroll"
  class="_container sticky top-0 transition-transform duration-500 z-50"
  :class="{'backdrop-blur-md': blurNavbar, '-translate-y-full': hideNavbar}">
  <div class="navbar">
    <div class="navbar-start w-fit">
      <button x-on:click="scrollTo($refs.body)" class="text-2xl font-bold">
        {site.data.logo}
      </button>
    </div>

    <div class="navbar-end flex-grow">
      <div class="hidden md:block">
        <ul class="menu menu-horizontal text-lg py-0">
          {
            site.data.menu.map((item) => (
              <li>
                <button
                  x-on:click={`scrollTo($refs.${item.ref})`}
                  class="active:!bg-black active:!bg-opacity-25">
                  {item.name}
                </button>
              </li>
            ))
          }
        </ul>
      </div>

      <div class="md:hidden w-10 h-10">
        <label class="swap swap-rotate">
          <input
            x-ref="buttonMobileMenu"
            @change="toggleMobileMenu"
            type="checkbox"
            aria-label="Меню"
          />

          <svg
            class="swap-off w-10 h-10 fill-current"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24">
            <path d="M4 6h16v2H4zm4 5h12v2H8zm5 5h7v2h-7z"></path>
          </svg>

          <svg
            class="swap-on w-10 h-10 fill-current"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24">
            <path
              d="m16.192 6.344-4.243 4.242-4.242-4.242-1.414 1.414L10.535 12l-4.242 4.242 1.414 1.414 4.242-4.242 4.243 4.242 1.414-1.414L13.364 12l4.242-4.242z"
            ></path>
          </svg>
        </label>
      </div>
    </div>
  </div>

  <div x-ref="mobileMenu" class="absolute top-18 right-8 hidden md:hidden">
    <ul class="menu bg-base-300 rounded-box shadow text-lg p-4">
      {
        site.data.menu.map((item) => (
          <li>
            <button
              x-on:click={`scrollTo($refs.${item.ref})`}
              class="active:!bg-black active:!bg-opacity-25">
              {item.name}
            </button>
          </li>
        ))
      }
    </ul>
  </div>
</div>
